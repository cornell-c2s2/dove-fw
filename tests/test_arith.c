//========================================================================
// test_arith.c
//========================================================================
// Testing of arithmetic functions

#include "arith.h"

#include <assert.h>
#include <stdio.h>

//------------------------------------------------------------------------
// Multiplication
//------------------------------------------------------------------------

void test_mul() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( mul( 2, 3 ) ==  6 );
    assert( mul( 4, 7 ) == 28 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Negative operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( mul( -2, 3 ) ==  -6 );
    assert( mul( -6, 5 ) == -30 );
    assert( mul( 2, -3 ) ==  -6 );
    assert( mul( 6, -5 ) == -30 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( mul(  0,  3 ) == 0 );
    assert( mul(  4,  0 ) == 0 );
    assert( mul(  0, -9 ) == 0 );
    assert( mul( -7,  0 ) == 0 );
}

void test_mulu() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( mulu( 2, 3 ) ==  6 );
    assert( mulu( 4, 7 ) == 28 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( mul(  0,  3 ) == 0 );
    assert( mul(  4,  0 ) == 0 );
}

//------------------------------------------------------------------------
// Division
//------------------------------------------------------------------------

void test_div() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( div(  9, 4 ) == 2 );
    assert( div( 35, 8 ) == 4 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Exact division
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( div( 12, 4 ) == 3 );
    assert( div( 24, 6 ) == 4 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Floor is 0
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( div( 2,  3 ) == 0 );
    assert( div( 6, 13 ) == 0 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Negative operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( div( -6,   5 ) == -1 );
    assert( div( -42,  7 ) == -6 );
    assert( div(  -2,  3 ) ==  0 );
    assert( div(   6, -5 ) == -1 );
    assert( div(  42, -7 ) == -6 );
    assert( div(   2, -3 ) ==  0 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( div(  0,  3 ) == 0 );
    assert( div(  4,  0 ) == 0 );
    assert( div(  0, -9 ) == 0 );
    assert( div( -7,  0 ) == 0 );
}

void test_divu() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( divu(  9, 4 ) == 2 );
    assert( divu( 35, 8 ) == 4 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Exact division
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( divu( 12, 4 ) == 3 );
    assert( divu( 24, 6 ) == 4 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Floor is 0
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( divu( 2,  3 ) == 0 );
    assert( divu( 6, 13 ) == 0 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( divu(  0,  3 ) == 0 );
    assert( divu(  4,  0 ) == 0 );
}

//------------------------------------------------------------------------
// Remainder
//------------------------------------------------------------------------

void test_rem() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( rem(  9, 4 ) == 1 );
    assert( rem( 35, 8 ) == 3 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Exact division
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( rem( 12, 4 ) == 0 );
    assert( rem( 24, 6 ) == 0 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Floor is 0
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( rem( 2,  3 ) == 2 );
    assert( rem( 6, 13 ) == 6 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Negative operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( rem( -6,   5 ) == -1 );
    assert( rem( -42,  7 ) ==  0 );
    assert( rem(  -2,  3 ) == -2 );
    assert( rem(   6, -5 ) == -1 );
    assert( rem(  42, -7 ) ==  0 );
    assert( rem(   2, -3 ) == -2 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( rem(  0,  3 ) ==  0 );
    assert( rem(  4,  0 ) ==  4 );
    assert( rem(  0, -9 ) ==  0 );
    assert( rem( -7,  0 ) == -7 );
}

void test_remu() {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Basic tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( remu(  9, 4 ) == 1 );
    assert( remu( 35, 8 ) == 3 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Exact division
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( remu( 12, 4 ) == 0 );
    assert( remu( 24, 6 ) == 0 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Floor is 0
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( remu( 2,  3 ) == 2 );
    assert( remu( 6, 13 ) == 6 );

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Zero operands
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    assert( remu(  0,  3 ) == 0 );
    assert( remu(  4,  0 ) == 4 );
}

//------------------------------------------------------------------------
// Main
//------------------------------------------------------------------------

int main( void ) {

    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Run the tests
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    test_mul();
    test_mulu();
    test_div();
    test_divu();
    test_rem();
    test_remu();

    printf( "All tests passed!\n" );
    return 0;
}